<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <base target="_top" />
        <title>Beon Referral Program</title>
        <style>
            @import './styles/main.scss';
        </style>
    </head>
    <body>
        <div id="app">test 4</div>
        <script type="module">
            // Access userAuthEmail pass from Google Script doGet() function
            // using Google Script Standars Scriptlets
            // https://developers.google.com/apps-script/guides/html/templates#standard_scriptlets
            const googleAuthUserEmail = '<?= authUserEmail ?>';
            const isValidEmail = !googleAuthUserEmail.includes('authUserEmail');

            const envProps = '<?= JSON.stringify(envProps) ?>';
            const isValidEnvProps = !envProps.includes('envProps');

            // The next line is just a workaround to run the app locally without getting the userAuthEmail
            // from Google Script doGet() function and harcoding the email value.
            const beonerTestUserEmail = 'alejandro.monasterios@beon.tech';
            const beonerUserEmail = isValidEmail ? googleAuthUserEmail : beonerTestUserEmail;
            const { beonApiUrl = '', beonPlatformUrl = '' } = isValidEnvProps ? JSON.parse(envProps) : {};

            // NOTE: The values `beon-api-url` and `beon-platform-url` are still in progress to
            // get use it as environment variables from Google Script Properties
            localStorage.setItem('beoner-user-email', JSON.stringify(beonerUserEmail));
            localStorage.setItem('beon-api-url', JSON.stringify(beonApiUrl));
            localStorage.setItem('beon-platform-url', JSON.stringify(beonPlatformUrl));

            import './index.js';
        </script>
    </body>
</html>
