<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <base target="_top" />
        <title>Beon Referral Program</title>
        <style>
            @import './styles/main.scss';
        </style>
    </head>
    <body>
        <div id="app"></div>
        <script type="module">
            // Access user auth email pass from Google Script doGet function
            // using Google Script Standars Scriptlets
            // https://developers.google.com/apps-script/guides/html/templates#standard_scriptlets
            const googleAuthUserEmail = '<?= authUserEmail ?>';
            const isValidEmail = !googleAuthUserEmail.includes('authUserEmail');

            const envProps = '<?= JSON.stringify(envProps) ?>';
            const isValidEnvProps = !envProps.includes('envProps');

            // TODO: Remove beonerTestUserEmail and show an error the email is not valid
            const beonerTestUserEmail = 'alejandro.monasterios@beon.tech';
            const beonerUserEmail = isValidEmail ? googleAuthUserEmail : beonerTestUserEmail;
            const { beonApiUrl = '', beonPlatformUrl = '' } = isValidEnvProps ? JSON.parse(envProps) : {};

            localStorage.setItem('beoner-user-email', JSON.stringify(beonerUserEmail));
            localStorage.setItem('beon-api-url', JSON.stringify(beonApiUrl));
            localStorage.setItem('beon-platform-url', JSON.stringify(beonPlatformUrl));

            import './index.js';
        </script>
    </body>
</html>
